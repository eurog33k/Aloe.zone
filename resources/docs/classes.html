<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />

	<title>Aloe Express | Documentation | Classes</title>

    <meta name="theme-version" content="1.8.1" />
    <meta name="foundation-version" content="5.5.4" />
    <meta name="modernizr-version" content="3.6.0" />

	
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css" integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1" crossorigin="anonymous">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="robots" content="index, follow" />
		<meta name="generator" content="RapidWeaver" />
		
	<meta name="twitter:card" content="summary">
	<meta name="twitter:title" content="Aloe Express | Documentation | Classes">
	<meta name="twitter:url" content="https://aloe.zone/offsite-2/offsite-3//resources/docs/classes.html">
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="Aloe Express">
	<meta property="og:title" content="Aloe Express | Documentation | Classes">
	<meta property="og:url" content="https://aloe.zone/offsite-2/offsite-3//resources/docs/classes.html">

	<link rel="stylesheet" type="text/css" media="all" href="../../rw_common/themes/foundation/consolidated.css?rwcache=596126273&rwcache=596126273" />
		
	<script>var foundation={};</script>
	<script>function loadCSS(a,b,c){"use strict";var d=window.document.createElement("link"),e=b||window.document.getElementsByTagName("script")[0],f=window.document.styleSheets;return d.rel="stylesheet",d.href=a,d.media="only x",e.parentNode.insertBefore(d,e),d.onloadcssdefined=function(a){for(var b,c=0;c<f.length;c++)f[c].href&&f[c].href===d.href&&(b=!0);b?a():setTimeout(function(){d.onloadcssdefined(a)})},d.onloadcssdefined(function(){d.media=c||"all"}),d}</script>

	

			<link rel='stylesheet' type='text/css' media='all' href='../../rw_common/plugins/stacks/stacks.css?rwcache=596126273&rwcache=596126273' />
		<link rel='stylesheet' type='text/css' media='all' href='classes_files/stacks_page_page9.css?rwcache=596126273&rwcache=596126273' />
        <script type='text/javascript' charset='utf-8' src='../../rw_common/plugins/stacks/jquery-2.2.4.min.js?rwcache=596126273&rwcache=596126273'></script>
        
        <link rel="stylesheet" href="../../rw_common/plugins/stacks/font-awesome.min.css?rwcache=596126273&rwcache=596126273">
        
		
		<script type='text/javascript' charset='utf-8' src='classes_files/stacks_page_page9.js?rwcache=596126273&rwcache=596126273'></script>
        <meta name="formatter" content="Stacks v4.0.3 (4795)" >
		<meta class="stacks4 stack version" id="com.joeworkman.stacks.foundation.header" name="Header" content="1.8.7">
		<meta class="stacks4 stack version" id="com.joeworkman.stacks.foundation.animate" name="Animate" content="1.8.7">
		<meta class="stacks4 stack version" id="com.joeworkman.stacks.foundation.styles.s3" name=" Site Styles" content="1.8.7">
		<meta class="stacks4 stack version" id="com.joeworkman.stacks.foundation.1col.s3" name="1 Column Foundation" content="1.8.7">
		<meta class="stacks4 stack version" id="com.nickcatesdesign.stacks.rails_item" name="Rail - Item" content="">
		<meta class="stacks4 stack version" id="com.joeworkman.stacks.foundation.topbar.s3" name="Top Bar" content="1.8.7">
		<meta class="stacks4 stack version" id="com.joeworkman.stacks.foundation.3col.s3" name="3 Column Foundation" content="1.8.7">
		<meta class="stacks4 stack version" id="com.joeworkman.stacks.foundation.topbar.dropzone" name="Top Bar Dropzone" content="1.8.7">
		<meta class="stacks4 stack version" id="com.joeworkman.stacks.locker" name="Locker" content="1.2.1">
		<meta class="stacks4 stack version" id="com.nickcatesdesign.stacks.rails" name="Rails" content="1.0.3">
		<meta class="stacks4 stack version" id="com.joeworkman.stacks.foundation.paragraph.s3" name="Paragraph" content="1.8.7">
		<meta class="stacks4 stack version" id="com.joeworkman.stacks.foundation.divider.s3" name="Divider" content="1.8.7">
		<meta class="stacks4 stack version" id="com.nickcatesdesign.stacks.rails_section" name="Rail - Section" content="">
		




	<script>var jQuery=stacks.jQuery,$=jQuery;</script>
	<style type="text/css" media="all">h1 {
    margin-top: 24px;
    font-weight: 400;
    color: rgba(20, 155, 64, 1.00);
}

h2 {
    margin-top: 36px;
    border: 1px solid #ccc;
    background-color: #eee;
    padding: 9px;    
    font-weight: 400;
}

h3 {
    margin-top: 48px;
    font-weight: 350;
    border-bottom: 1px dotted #ccc;
}

pre.code {
	font-size: 10pt; 
	background: #eeeeee; 
	padding: 9px;
}	</style>
</head>

<body class="antialiased">

<div id="foundation-loader"></div>






<div id='stacks_out_1_page9' class='stacks_top'>
    <div id='stacks_in_1_page9' class=''>


<div id='stacks_out_47_page9' class='stacks_out'>
    <div id='stacks_in_47_page9' class='stacks_in '>
   <!--[if lt IE 9]> <meta http-equiv="refresh" content="0; url="> <![endif]-->      


<div id='stacks_out_p47_n25_page9' class='stacks_out'>
    <div id='stacks_in_p47_n25_page9' class='stacks_in com_joeworkman_stacks_foundation_1col_s3_stack'>


<div class='row   max-edge     '  > <div class='columns small-12      '> 
<div id='stacks_out_p47_n26_page9' class='stacks_out'>
    <div id='stacks_in_p47_n26_page9' class='stacks_in com_joeworkman_stacks_foundation_animate_stack'>
<div class="wow fadeInDown" data-wow-duration="800ms" data-wow-delay="0ms" data-wow-offset="100" data-wow-iteration="1"> 
<div id='stacks_out_p47_n27_page9' class='stacks_out'>
    <div id='stacks_in_p47_n27_page9' class='stacks_in com_joeworkman_stacks_foundation_paragraph_s3_stack'>
 <p class="text-center    " draggable="false" >
    <strong>Aloe for PHP is coming soon. </strong><strong><a href="https://timdietrich.me/blog/aloe-for-php/" target="_blank">Learn more ></a></strong>

</p> 

    </div>
</div>

 </div>

    </div>
</div>

 </div> </div>

    </div>
</div>




<div id='stacks_out_p47_n3_page9' class='stacks_out'>
    <div id='stacks_in_p47_n3_page9' class='stacks_in com_joeworkman_stacks_foundation_topbar_s3_stack'>



<div class="top-bar-wrapper full-width      matchPadding solid    submenuIndicator menu-align-right zone-align-left">
    <nav class="top-bar" data-topbar data-options="is_hover:true;custom_back_text:true;back_text:Back;mobile_show_parent_link:true;scrolltop:false;" role="navigation">
        <ul class="title-area title-area-site-setup">
            <li class="name ">
                
                    <a href="https://aloe.zone/">
                        
                            <span class=""><img src="../../rw_common/images/aloe-plant-transparent.png" width="500" height="500" alt="Aloe Express"/></span>
                        
                        
                            <h1 class="site-title font-family-h1 ">
                                Aloe Express
                                
                            </h1>
                        
                    </a>
                

                
            </li>
            <li class="toggle-topbar menu-icon">
                <a href="#">
                    <span>Menu</span>
                </a>
            </li>
        </ul>

        <section class="top-bar-section  menu-rw">







    <ul class="menu dropdown" role="navigation"><li class="has-dropdown" role="menuitem"><a href="../../" rel=""><i class="fa fa-home"></i> Home</a></li><li class="has-dropdown" role="menuitem"><a href="../../resources/downloads.html" rel=""><i class="fa fa-download"></i> Download</a></li><li class="has-dropdown" role="menuitem"><a href="" rel=""><header><i class="fa fa-life-ring"></i> Support</header></a><ul class="menu dropdown" role="navigation"><li class="has-dropdown" role="menuitem"><a href="../../tutorials/getting-started/" rel="">Getting Started</a></li><li class="has-dropdown" role="menuitem"><a href="../../tutorials/hello-world/" rel="">Hello World</a></li><li class="has-dropdown" role="menuitem"><a href="../../support/options.html" rel="">Support Options</a></li><li class="has-dropdown" role="menuitem"><a href="../../support/faq.html" rel="">FAQ</a></li></ul></li><li class="active has-dropdown" role="menuitem"><a href=""><header><i class="fa fa-star-o"></i> Resources</header></a><ul class="menu dropdown" role="navigation"><li class="active has-dropdown" role="menuitem"><a href=""><header>Documentation</header></a><ul class="menu dropdown" role="navigation"><li class="active has-dropdown" role="menuitem"><a href="classes.html">Classes</a></li><li class="has-dropdown" role="menuitem"><a href="../../resources/docs/methods.html" rel="">Methods</a></li></ul></li><li class="has-dropdown" role="menuitem"><a href="../../resources/tech-notes/" rel="">Technical Notes</a></li><li class="has-dropdown" role="menuitem"><a href="../../resources/additional.html" rel="">Additional Resources</a></li><li class="has-dropdown" role="menuitem"><a href="../../resources/license.html" rel="">License</a></li><li class="has-dropdown" role="menuitem"><a href="../../resources/colophon.html" rel="">Colophon</a></li><li class="has-dropdown" role="menuitem"><a href="../../about/thanks.html" rel="">Thanks</a></li></ul></li></ul>










        </section>
    </nav>
</div>



    </div>
</div>

    </div>
</div>


<div id='stacks_out_10_page9' class='stacks_out'>
    <div id='stacks_in_10_page9' class='stacks_in com_joeworkman_stacks_foundation_1col_s3_stack'>


<div class='row  collapse max-edge     '  > <div class='columns small-12      '> 
<div id='stacks_out_12_page9' class='stacks_out'>
    <div id='stacks_in_12_page9' class='stacks_in com_joeworkman_stacks_foundation_1col_s3_stack'>


<div class='row   max-edge   padding-detailed  '  > <div class='columns small-12      '> 
<div id='stacks_out_15_page9' class='stacks_out'>
    <div id='stacks_in_15_page9' class='stacks_in com_joeworkman_stacks_foundation_header_stack'>
<h1 class="text-center     " >Aloe Express Classes</h1>

    </div>
</div>

 </div> </div>

    </div>
</div>

 </div> </div>

    </div>
</div>


<div id='stacks_out_230_page9' class='stacks_out'>
    <div id='stacks_in_230_page9' class='stacks_in com_nickcatesdesign_stacks_rails_stack'>

<div id="rails-wrapper" class="cf rail-left">
  <div class="rails-rail cf" data-ncdp='rails' data-ncdv='1.0.3' data-ncdt='stack'>
    <div id="rails-nav">
    	<ul>
    		<li><a class="" href="http://"></i>CacheEngine</a></li><li><a class="" href="http://"></i>ConnectionSweeper</a></li><li><a class="" href="http://"></i>HelperApp</a></li><li><a class="" href="http://"></i>Logger</a></li><li><a class="" href="http://"></i>Request</a></li><li><a class="" href="http://"></i>RequestThread</a></li><li><a class="" href="http://"></i>Response</a></li><li><a class="" href="http://"></i>Server</a></li><li><a class="" href="http://"></i>ServerThread</a></li><li><a class="" href="http://"></i>SessionEngine</a></li><li><a class="" href="http://"></i>Template</a></li><li><a class="" href="http://"></i>XSProcessor</a></li>
    	</ul>
    </div>
  </div>
  <div id="rails-sections" class="cf">
    <div id="rails-push">
      
<style scoped>
.stacks_in_235_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_235_page9.ts-box a{color: #00A8FF;}
.stacks_in_235_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_235_page9.ts-box.transparent{background: none;}
.stacks_in_235_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_235_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_235_page9 transparent">
<div id='stacks_out_242_page9' class='stacks_out'>
    <div id='stacks_in_242_page9' class='stacks_in html_stack'>
<h1>CacheEngine</h1>
<p>
CacheEngine, a subclass of the Xojo Timer class, can be used to cache data on the server, which can greatly improve performance for some applications.
The cache itself is implemented as a Dictionary. As a result, you can cache nearly any value or object type.
</p>
<p>
With CacheEngine, you can specify when an entry expires. CacheEngine automatically handles expired content, both when cache entries are requests and proactively via a timer. As a result, no "stale" cached entries are ever returned, and no entries are ever "orphaned."
</p>

<h2>Methods</h2>

<h3>Delete</h3>
<p>
Use the Delete method to remove an entry from the cache. For example:
</p>		
<pre class="code">CacheEngine.Delete("vendors")</pre>

<h3>Get</h3>
<p>
To retrieve a value from the cache, use the Get method. This method will check to see if the cached value has expired or not. If the requested entry is either not found or has expired, the method will return a Nil value. Otherwise, it returns a Dictionary with three entries: Content, which is the actual cached value. Expiration, which is the entry's expiration date, represented as a Date. And Entered, which is the date/time that the entry was added to the cached (represented as a Date).
</p>
<p>
For example:
</p>		
<pre class="code">// Try to get the cached content.
Dim CacheEntry As Dictionary = App.CacheEngine.Get("DrummersTable")
If CacheEntry <> Nil Then
// Use the cached content.
TableHTML = CacheEntry.Value("Content")  
Else
...
End If</pre>

<h3>Put</h3>	
<p>
To add an entry to the cache, use the Put method. The method takes three parameters: Name, which is the unique entry name. Content, which is the value to be cached. And ExpirationSecs, which is an integer value representing the number of seconds that the entry should be cached before it is considered to be "stale."
</p>
<p>
Example:
</p>
<pre class="code">App.CacheEngine.Put("DrummersTable", TableHTML, 60)</pre>


<h3>Reset</h3>	
<p>
To easily remove all entries from the cache, use the Reset method.
</p>
<pre class="code">CacheEngine.Reset</pre>

<h3>Sweep</h3>	
<p>
The Sweep method is used internally, and called on a timer, to evaluate all cached entries and remove those that have expired.
</p>		

    </div>
</div>


<div id='stacks_out_244_page9' class='stacks_out'>
    <div id='stacks_in_244_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
<style scoped>
.stacks_in_350_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_350_page9.ts-box a{color: #00A8FF;}
.stacks_in_350_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_350_page9.ts-box.transparent{background: none;}
.stacks_in_350_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_350_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_350_page9 transparent">
<div id='stacks_out_351_page9' class='stacks_out'>
    <div id='stacks_in_351_page9' class='stacks_in html_stack'>
<h1>ConnectionSweeper</h1>
<p>
Starting with Aloe Express v3.0, persistent connections (also known as "Keep-Alives") are supported and enabled by default. ConnectionSweeper, a subclass of the Xojo Timer class, periodically removes any connections that have timed out 
(i.e., that have been idle for too long, based on the server's KeepAliveTimeout property.
</p>
<p>
ConnectionSweeper was enhanced in Aloe Express v4.0 to also "sweep" expired WebSocket connections (based on the Server.WSTimeout property.
</p>
<p>
An instance of this class is automatically created when a server
instance runs. The interval with which the sweep occurs is controlled by the server's
ConnSweepIntervalSecs property. Its default is 15 seconds.
</p>
    </div>
</div>


<div id='stacks_out_353_page9' class='stacks_out'>
    <div id='stacks_in_353_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
<style scoped>
.stacks_in_237_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_237_page9.ts-box a{color: #00A8FF;}
.stacks_in_237_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_237_page9.ts-box.transparent{background: none;}
.stacks_in_237_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_237_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_237_page9 transparent">
<div id='stacks_out_246_page9' class='stacks_out'>
    <div id='stacks_in_246_page9' class='stacks_in html_stack'>
		<h1>HelperApp</h1>
		<p>
		Xojo uses a co-operative threading model, and as a result, all threads
		must run on a single core. To make use of other cores, Xojo suggests
		using separate processes in the form of "helper apps." 
		(For more information on Xojo's support for threads and this "helper app" concept, 
		please see 
		<a href="https://blog.xojo.com/2018/01/25/supporting-multiple-cores/" target="_new">
		"Supporting Multiple Cores"</a> by Norman Palardy and 
		<a href="https://blog.xojo.com/2013/07/26/take-advantage-of-your-multi-core-processor/" target="_new">
		"Take advantage of your multi-core processor"</a> by Paul Lefebvre.)
		</p>
		<p>
		The Aloe Express HelperApp class has been designed to make it easy for you to
		implement helper apps. The class is a subclass of Xojo's 
		<a href="http://docs.xojo.com/index.php/Shell" target="_docs">
		Shell class</a>. It handles the execution of a helper app as well as the 
		handling of its response.
		</p>
		
		<h2>Example</h2>
		<p>
		In this example, the Aloe Express-based app is 
		using a helper app named "Aloe-Express-Demo-Helper" and passing it a single 
		parameter ("Kirk"). The app is being run in an asynchronous shell,
		so that no blocking occurs. When the helper app has finished processing,
		the result is available to the caller via the HelperApp's "Result" property.
		</p>
<pre class="code">  // Create, configure, and launch an instance of a helper app.
  Dim HelperApp As New AloeExpress.HelperApp
  HelperApp.Name = "Aloe-Express-Demo-Helper"
  HelperApp.Parameters = Request.GET.Lookup("captain", "Kirk")
  HelperApp.Launch
  
  // Set the response content to be the helper app's result.
  Request.Response.Content = HelperApp.Result
  
  // Update the content type.
  Request.Response.Headers.Value("Content-Type") = AloeExpress.MIMETypeGet("json")
  
  // Close the helper app.
  HelperApp.Close
</pre>		

		<h2>Methods</h2>
		
		<h3>Launch</h3>
		<p>
		Launches the helper app, and waits for it to complete.
		The helper app is run in an asynchronous shell,
		so that no blocking occurs.
		</p>		
		
		<p>
		Refer to the Xojo
		<a href="http://docs.xojo.com/index.php/Shell" target="_docs">Shell class</a>
		for additional methods.
		</p>
			
		
		<h2>Properties</h2>
		
		<h3>Name</h3>
		<p>
		The name of the helper app. 
		</p>
		
		<h3>Parameters</h3>
		<p>
		Any command-line parameters that are to be passed to the helper app.
		</p>	
		
		<h3>Result</h3>
		<p>
		The result that is returned by the helper app.
		</p>
		
		<h3>Running</h3>
		<p>
		An internal property that indicates if the helper app is running.
		</p>						
		
		<p>
		Refer to the Xojo
		<a href="http://docs.xojo.com/index.php/Shell" target="_docs">Shell class</a>
		for additional properties.
		</p>			    </div>
</div>


<div id='stacks_out_245_page9' class='stacks_out'>
    <div id='stacks_in_245_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
<style scoped>
.stacks_in_239_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_239_page9.ts-box a{color: #00A8FF;}
.stacks_in_239_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_239_page9.ts-box.transparent{background: none;}
.stacks_in_239_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_239_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_239_page9 transparent">
<div id='stacks_out_264_page9' class='stacks_out'>
    <div id='stacks_in_264_page9' class='stacks_in html_stack'>
		<h1>Logger</h1>
		<p>
		The Logger class can be used to generate a log of requests and responses in the industry standard <a href="https://www.w3.org/TR/WD-logfile.html" target="_new">Extended Log File Format</a>. It is primarily intended for use with browser-based Web apps and traditional Web sites, so that traffic and usage can be analyzed. The Logger class is a subclass of Xojo's <a href="http://docs.xojo.com/index.php/Thread" target="_docs">Thread class</a>.
		</p>

<p>
Starting with Aloe Express v3.0, the Logger class automatically takes into account any "X-Forwarded-For" headers,
which are used when apps are being proxied.
</p>
		
		<h2>Methods</h2>
		
		<h3>RequestLog</h3>
		<p>
		This method, which is called internally when the Logger thread runs,
		logs the request.
		</p>
		
		<h3>Run</h3>
		<p>
		Runs the Logger thread, which in turn calls the RequestLog method.
		</p>
		
		<h2>Properties</h2>
		
		<h3>Folder</h3>
		<p>
		Specifies the directory in which the log files are to be written. 
		By default, the directory is named "logs" and it is located
		in the parent folder of the app itself.		
		</p>
		
		<h3>IPAddress</h3>
		<p>
		The IP address of the client that made the request. By default,
		this is derived from the Request itself (Request.RemoteAddress).
		However, in some cases, such as when the app is running behind a proxy server,
		the IP address might need to be derived from a header value. For example, 
		the true IP address might be available via the "X-Forwarded-For" HTTP header.
		This property gives you the ability to specify the alternative value.
		</p>
		
		<h3>Request</h3>
		<p>
		This is the Request object itself, from which the Logger instance can derive
		information about the request (path, method, etc) as well as from the associated
		Response object (status, content length, etc).
		</p>
		
		<h2>Example Usage</h2>
		<pre class="code">Dim Logger As New AloeExpress.Logger
Logger.Folder = GetFolderItem("").Parent.Child("logs")
Logger.Request = Request
Logger.IPAddress = Request.Headers.Lookup("X-Forwarded-For", Request.RemoteAddress)
Logger.Run		
		</pre>    </div>
</div>


<div id='stacks_out_266_page9' class='stacks_out'>
    <div id='stacks_in_266_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
<style scoped>
.stacks_in_267_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_267_page9.ts-box a{color: #00A8FF;}
.stacks_in_267_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_267_page9.ts-box.transparent{background: none;}
.stacks_in_267_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_267_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_267_page9 transparent">
<div id='stacks_out_269_page9' class='stacks_out'>
    <div id='stacks_in_269_page9' class='stacks_in html_stack'>
<h1>Request</h1>
<p>
The Request class provides access to request properties (headers, parameters, etc)
as well as several methods that assist with the processing of a request 
and generating a response.		
It is a subclass of Xojo's 
<a href="http://docs.xojo.com/index.php/SSLSocket" target="_docs">SSLSocket</a> class.
</p>

<h2>Methods</h2>

<h3>Close</h3>
<p>
Resets a request's properties before calling Super.Close. 
This is intended to prevent WebSocket connections and persistent connections 
from inadvertently maintaining state as sockets are recycled.
</p>

<h3>Dump</h3>
<p>
The Dump method can be used to generate HTML that lists many of the
Request instance's properties. It is useful when debugging applications.
</p>

<h3>MapToFile</h3>
<p>
The MapToFile method can be used to easily map a request to a static file 
in a directory specifed by the Request's StaticPath property. 
</p>
<p>
By default, the StaticPath points to an "htdocs" folder that is
located in the app's parent directory. 
To specify an alternative directory, adjust the Request's StaticPath 
property. 
</p>
<p>
The method also uses the IndexFilenames property, which can be used to
specify default index file names. This property is an array of strings,
and by default includes "index.html" and "index.htm" values. 
</p>
<p>
Starting in Aloe Express v3.0, ETag support has been added via the Request.MapToFile method, 
which provides web cache validation. By default, ETags are used when serving static resources via 
the method. You can disable this feature by calling the method and passing
False as the "UseEtags" parameter.
</p>

<h3>ResourceNotFound (formerly Set404Content)</h3>
<p>
This method sets the Request's Response content to Aloe's standard 
404 "Not Found" content. While the method can be called directly,
it is also used by the MapToFile method in cases where a request
cannot be mapped to a static file.
</p> 

<h3>SessionGet</h3>
<p>
To obtain or restore a session for a given session, call the SessionGet method. 
You can optionally pass a AssignNewID Boolean parameter 
to indicate whether a new Session ID should be assigned to the session. 
By default, this is set to True to prevent session fixation attacks. 
In some cases, such as when processing XHRs (XMLHttpRequests), 
you might want to obtain a session without generating a new Session ID.
To use this method, the Server must have sessions enabled.
</p> 

<h3>SessionTerminate</h3>
<p>
To terminate a request's session, simply call the SessionTerminate method.
To use this method, the Server must have sessions enabled.
</p> 

<h3>WSConnectionClose</h3>
<p>
If the request is servicing a WebSocket connection, 
then this method can be used to close the WebSocket connection 
and close the socket.
</p> 

<h3>WSMessageGet</h3>
<p>
This method is used internally by the Request.DataAvailable event handler 
to process an incoming WebSocket message. If the message is a request
to close the connection, the WSConnectionClose method is called.
Otherwise, frame decoding logic is used to build the message in its entirety
and provide it to the app (via the Request.Body property) for processing.
</p> 

<h3>WSMessageSend</h3>
<p>
Sends a WebSocket (text) message to a client.
As ov v4.0, only text frames (Opcode 1) are supported. 
For details, refer to RFC 6455 Section 11.8 ("WebSocket Opcode Registry"). 
Binary frames (Opcode 2) might be supported in a future version. 
Similarly, pings (Opcode 9) and pongs (Opcode 10) are not currently supported.
</p> 


<h2>Properties</h2>

<h3>Body</h3>
<p>
The Body property consists of the request content excluding the the request headers.
It is typically used when making POST, PUT, and PATCH requests,
where the content being sent to the server is not "x-www-form-urlencoded."
For example, a client might send a JSON or XML request body.
</p>

<h3>Cookies</h3>
<p>
Cookies provides access to any cookies that were received in the request. 
It is a Dictionary.
</p>
<p>
To access a cookie, use its name as a dictionary key. For example:
</p>
<pre class="code">Dim PreferredLanguage As String = Request.Cookies.Lookup("PreferredLanguage", "English")		
</pre>

<h3>Custom</h3>
<p>
A dictionary that can be used to store values for application-specific attributes about a request, 
which persists between requests when the socket is being held open (for example,
when it is servicing a WebSocket connection). For an example of how it can
be used, see the WebSocket demo. 
Note that the dictionary is initialized in the Request.Prepare method.
</p>

<h3>Files</h3>
<p>
The Files property, a Dictionary, provides information about any files that have been uploaded.
</p>

<h3>GET</h3>
<p>
The GET property provides access to any URL parameters that were 
included in the request.		
It is a Dictionary. 
</p>
<p>
For example, consider a request made using this URL:
</p>
<pre class="code">http://127.0.0.1:8080/?x=1&y=2
</pre>
<p>
The GET dictionary would include two entries, one with key "x" and a value of "1"
and a second with key "y" and value of "2."
You would access the GET values like this:
</p>
<pre class="code">Dim X As String = Request.GET.Lookup("x", "")
Dim Y As String = Request.GET.Lookup("y", "")
</pre>
<p>
Note that when Aloe Express generates the GET dictionary, it automatically
URL decodes the parameter values.
</p>

<h3>Headers</h3>
<p>
The Headers property is a Dictionary. 
It includes entries for any HTTP headers that were 
included in the request.
</p>
<p>
You might access the value of a "User-Agent" Header like this:
<pre class="code">Dim UserAgent As String = Request.Headers.Lookup("User-Agent", "")
</pre>

<h3>HTTPVersion</h3>
<p>
This property can be used to determine the HTTP version that was used to
make the request.
</p>

<h3>IndexFilenames</h3>
<p>
IndexFilenames is an array of strings. 
It's used by the MapToFile method to map a request to a static file.
The MapToFile method takes the IndexFilenames values into account
when mapping requests that end with a backslash.
</p>

<h3>Method</h3>
<p>
The Method property (a string) is set based on the the HTTP method that was used
to make the request. For example, GET, POST, PUT, PATCH, DELETE, HEAD, etc.
</p>

<h3>Path</h3>
<p>
The Path property (a string) indicates the path of the resource that was requested.
Note that the Path will not include any URL parameters that were specified. 
To access those, refer to the URLParams property, or the GET property.
</p>

<h3>PathComponents</h3>
<p>
PathComponents is an array of strings, where each string represents a component
of the request path. This is provided as a convenience to help with routing 
requests.
</p>

<h3>PathItems</h3>
<p>
A dictionary representation of the PathComponents array, 
which can be used to more easily evaluate a request's path for routing and processing.
</p>

<h3>POST</h3>
<p>
The POST property provides access to any parameters that were 
included in the request's body, where the request is actually a form that
has been submitted with a "application/x-www-form-urlencoded" content type.		
POST is a Dictionary. 
</p>		

<h3>Response</h3>
<p>
Every Request instance is assigned an instance of the Response class,
which can be used to craft a response to the request.
</p>

<h3>Server</h3>
<p>
The Aloe Express Server instance that the request is associated with.
</p>

<h3>Session</h3>
<p>
The Session property, which is a dictionary, is used to conveniently associate a session
with the Request. See the SessionGet and SessionTerminate methods for more info.
</p>

<h3>SocketID</h3>
<p>
SocketID is a unique ID that was assigned to the Request when it was
added to the server's socket pool.
</p>

<h3>StaticPath</h3>
<p>
This property specifies the directory in which the MapToFile method 
will attempt to map requests to static files. 
By default, the directory is named "htdocs" and it is located
in the parent folder of the app itself.
</p>

<h3>URLParams</h3>
<p>
URLParams is a string containing any URL parameters that were passed
as part of the request. 
Refer to the GET property for a more convenient way to access the URL params.
</p>

<h3>WSStatus</h3>
<p>
WSStatus is a boolean value indicating the status of the request's WebSocket connection, if applicable.
The default value is Inactive.
</p>

    </div>
</div>


<div id='stacks_out_272_page9' class='stacks_out'>
    <div id='stacks_in_272_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
<style scoped>
.stacks_in_273_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_273_page9.ts-box a{color: #00A8FF;}
.stacks_in_273_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_273_page9.ts-box.transparent{background: none;}
.stacks_in_273_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_273_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_273_page9 transparent">
<div id='stacks_out_275_page9' class='stacks_out'>
    <div id='stacks_in_275_page9' class='stacks_in html_stack'>
		<h1>RequestThread</h1>
		<p>
		To prevent long-running requests from blocking other requests, Aloe Express uses
		a multi-threaded model. When a Request is ready for processing, 
		it is assigned to a RequestThread instance, 
		which removes it from the main thread.
		</p>    </div>
</div>


<div id='stacks_out_277_page9' class='stacks_out'>
    <div id='stacks_in_277_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
<style scoped>
.stacks_in_278_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_278_page9.ts-box a{color: #00A8FF;}
.stacks_in_278_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_278_page9.ts-box.transparent{background: none;}
.stacks_in_278_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_278_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_278_page9 transparent">
<div id='stacks_out_280_page9' class='stacks_out'>
    <div id='stacks_in_280_page9' class='stacks_in html_stack'>
<h1>Response</h1>
<p>
The Response class is designed to make it easy to craft responses to incoming requests.
You can easily assign a response's status, headers, and content.
Each Request instance is assigned a Response class.
</p>

<h2>Methods</h2>

<h3>ContentCompress</h3>
<p>
Calling this method will result in the response's content being compressed (gzipped).
Additionally, a "Content-Encoding" header will be added to the response, 
indicating that the content has been compressed.
</p>
<p>
Note that this method will be called automatically when a request returns content,
if the Compress property is set to True.
</p>

<h3>CookieSet</h3>
<p>
This method makes it easy to return cookies as part of a response.
</p>
<p>
There are two ways to call CookieSet. First, you can specify a cookie name, 
value, and the cookie's expiration date as a Date. For example:
</p>
<pre class="code">Dim ExpirationDate As Date
Dim DateInterval As Xojo.Core.DateInterval = New Xojo.Core.DateInterval(0, 0, 0, 0, 0, 30)
ExpirationDate = Xojo.Core.Date.Now + DateInterval
Request.Response.CookieSet("x", "ABC", ExpirationDate)
Request.Response.CookieSet("y", "123", ExpirationDate)
</pre>
<p>
You can also call CookieSet by passing a cookie name, value, and integers
that represent its expiration based on a number of days, hours, minutes, and seconds.
For example:
</p>	
<pre class="code">Request.Response.CookieSet("x", "ABC", 0, 0, 0, 30)
Request.Response.CookieSet("y", "123", 30)		
</pre>
<p>
Before returning a response, Aloe Express automatically creates any "Set-Cookie" 
response headers that are needed, based on the cookies that have been specified.
</p>

<h3>Dump</h3>
<p>
The Dump method can be used to generate HTML that lists many of the
Response's properties. It is useful when debugging applications.
</p>

<h3>MetaRefresh (formerly MetaRedirect)</h3>
<p>
The MetaRefresh method is provided as a convenience. With it, 
you can easily generate an HTML response that performs a meta-refresh
to a specified URL.Can be helpful when the response needs to both set cookies 
and redirect the user.
</p>

<h3>SecurityHeadersSet</h3>
<p>
The SecurityHeadersSet method is provided as a convenience. It sets
several security-related headers, including:
<ul>
	<li>Content-Security-Policy: default-src 'none'; connect-src 'self'; frame-ancestors 'none'; img-src 'self'; script-src 'self'; style-src 'unsafe-inline' 'self';</li>
	<li>Referrer-Policy: no-referrer, strict-origin-when-cross-origin</li>
	<li>Strict-Transport-Security: max-age=63072000</li>
	<li>X-Content-Type-Options: nosniff</li>
	<li>X-Frame-Options: DENY</li>
	<li>X-XSS-Protection: 1; mode=block</li>
</ul>		
</p>

<!--
<h3>Set404Response</h3>
<p>
The Set404Response method can be used to quickly generate a 404 "Not Found" response. It sets the response Status to "404 Not Found" and the content to Aloe Express's default 404 page. Note that this method can be called directly, and that it is also called internally by the Request class's Set404Content method.
</p>
-->


	
<h2>Properties</h2>

<h3>Compress</h3>
<p>
Indicates if the response content should be compressed.
By default, the property is set to False.
</p>
<p>
When a Request instance creates a Response instance,
the request is evaluated to determine if the response should be compressed.
Specifically, the "Accept-Encoding" header is evaluated, 
and if gzipped content is accept by the client, 
then the Compress property is automatically set to True.
For implementation details, see the Request.ResponseCompressDefault method.
</p>

<h3>Content</h3>
<p>
The Content property (a string) is used to specify the content that will be returned
in the response.
</p>

<h3>Cookies</h3>
<p>
Cookies is a Dictionary that is used to specify any cookies that
should be returned as part of the request. 
It is used by the CookieSet method, but can also be accessed and modified directly.
</p>

<h3>Headers</h3>
<p>
The Headers property, a Dictionary, is used to specify any HTTP 
headers that should be included in the response.
</p>
<p>
Several default headers are assigned to the dictionary when a Response instance
is created. 
They include: 
<ul>
	<li>Connection: close</li>
	<li>Content-Language: en</li>
	<li>Content-Type: Set to "text/html; charset=UTF-8.</li>
	<li>Date: Set to the current date in RFC 822 / 1123 format.</li>
</ul>
</p>
<p>
Note that you can remove and override the default response headers as needed.
</p>
<p>
To learn more about HTTP headers, see
<a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html" target="_headers">
https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html</a>
</p>

<h3>HTTPVersion</h3>
<p>
This property indicates the HTTP version used for the response.
The default value is 1.1.
</p>

<h3>Request</h3>
<p>
The Aloe Express Request instance that the response is associated with.
</p>

<h3>Status</h3>
<p>
Use the Status property to specify the HTTP status code that is to be returned.
By default, the Status is set to "200 OK."
</p>
<p>
To learn more about HTTP status codes, see
<a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html" target="_headers">
https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html</a>
</p>		    </div>
</div>


<div id='stacks_out_282_page9' class='stacks_out'>
    <div id='stacks_in_282_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
<style scoped>
.stacks_in_283_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_283_page9.ts-box a{color: #00A8FF;}
.stacks_in_283_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_283_page9.ts-box.transparent{background: none;}
.stacks_in_283_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_283_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_283_page9 transparent">
<div id='stacks_out_332_page9' class='stacks_out'>
    <div id='stacks_in_332_page9' class='stacks_in html_stack'>
<h1>Server</h1>
<p>
All Aloe Express-based apps include an instance of the Server class.
The class includes a ServerSocket as a property, which listens on a specified port
for incoming requests, and hands them off to a pool of Request instances.
</p>
<p>
The Server class is a subclass of Xojo's <a href="http://docs.xojo.com/index.php/ServerSocket" target="_docs">ServerSocket</a> class. As a result, ServerSocket's properties and methods are available.
</p>

<h2>Examples</h2>
<p>
Normally, a Server instance is instantiated in an app's Run event handler.
For example:
</p>
<pre class="code">Dim Server As New AloeExpress.Server(args)
Server.Start		
</pre>
<p>
In this example, the app's command-line arguments are passed to the 
Server's constructor method. There are five command-line arguments that are
supported: --port, --maxsockets, --minsockets, --loopback, and --Nothreads. When provided, the
arguments are used to set the server's properties (described below).
This makes it possible for you to configure the server's port 
and sockets at runtime.
</p>
<p>
You can also configure the server's properties explicitly. For example:
</p>
<pre class="code">Dim Server As New AloeExpress.Server(args)
Server.Port = 64000
Server.MaximumSockets = 100
Server.MinimumSockets = 50
Server.Loopback = True
Server.Start		
</pre>		

<h2>SSL Support</h2>	
<p>
Starting in Aloe Express 2.0, the Server class provides full SSL / TLS support. 
</p>
<p>
You can configure a server's SSL-related properties explicitly. For example:
</p>
<pre class="code">Dim Server As New AloeExpress.Server(args)
Server.Port = 443
Server.Secure = True
Server.ConnectionType = SSLSocket.TLSv12
Server.CertificateFile = GetFolderItem("").Parent.Child("certificates").Child("certificatefile.crt")
Server.Start		
</pre>
<p>
In addition, you can configure the SSL-related properties using command line arguments.
For example:
</p>
<pre class="code">--Secure 
--ConnectionType=5 
--CertificateFile='/aloe/app/certificates/certificatefile.crt'
</pre>

<h2>Methods</h2>

<h3>Start</h3>
<p>
Use the start method to have the server begin listening for incoming requests.
</p>

<h3>WSMessageBroadcast</h3>
<p>
Can be used to send a message to all active WebSockets.
</p>	

<h2>Properties</h2>

<h3>CachingEnabled</h3>
<p>
A boolean value with a default of False. This property determines whether or not an instance of the AloeExpress.CacheEngine class
is created and associated with the Server (via the CacheEngine property described below) when the server starts.
</p>	

<h3>CacheEngine</h3>
<p>
CacheEngine is an AloeExpress.CacheEngine instance, which is optionally created if the server is started with the CachingEnabled set to True.
</p>	

<h3>CacheSweepIntervalSecs</h3>
<p>
If the server's caching is enabled (see "CachingEnabled" above), then this value is used to determine the frequency with which expired cache entries are removed. This is an Integer with a default value of 300
</p>	

<h3>CertificateFile</h3>
<p>
Use this FolderItem to specify the location of the server's SSL certificate.
The default location is a "certificates" folder in the parent directory
of the app's folder, and the default certificate name is: default-certificate.crt
</p>	

<h3>CertificatePassword</h3>
<p>
The certificate's password, if applicable.
</p>

<h3>ConnectionType</h3>
<p>
Indicates the type of connections that the SSLSockets should use.
Refer to ConnectionType property of the 
<a href="http://docs.xojo.com/index.php/SSLSocket" target="_docs">
Xojo SSLSocket class</a> 
for the types of connections that are supported.
The defaut is TLSv12 (5).
</p>	

<h3>Custom</h3>
<p>
A dictionary that persists between requests, and is scoped in such a way that it acts very much like an App-level property.
Can be used to store server-specific custom attributes.
</p>

<h3>Loopback</h3>
<p>
Set the Loopback property to true if you want to force the app to bind to
the loopback network interface. When enabled, only for requests originating 
from the same machine will be processed. By default, Loopback is set to False.
</p>			

<h3>MaxEntitySize</h3>
<p>
Specifies the maximum size of entities that will be accepted by the server.
This is particularly helpful when you want to limit the size of file uploads. 
By default, this is set to 10Mb.
</p>

<h3>MaximumSockets</h3>
<p>
Specifies the maximum number of connections the Server's ServerSocket instance 
will allow to connect. The default value is 10.
</p>

<h3>MinimumSockets</h3>
<p>
Specifies the minimum number of sockets available in the Server's Request pool.
The default value is 3.
</p>	

<h3>Multithreading</h3>
<p>
The AloeExpress Server uses a multi-threaded model where each request is processed in its own thread. The Multithreading property can be used to disable this feature, so that requests are processed in the primary thread. This is a Boolean value, with True as the default. The property can be set directly, or via the command line using the "--Nothreads" argument.
</p>		

<h3>Name</h3>
<p>
Can be used to display an alternate name when the server launches. The default is "Aloe Express Server."
</p>		

<h3>Port</h3>
<p>
Specifies the port that the server will be bound to and will listen for 
connections on.
The default value is 8080.
</p>	

<h3>Secure</h3>
<p>
Indicates whether the server is running in secure mode using SSL connections.
The default value is False.
</p>	

<h3>SessionsEnabled</h3>
<p>
A boolean value with a default of False. This property determines whether or not an instance of the AloeExpress.SessionEngine class
is created and associated with the Server (via the SessionEngine property described below) when the server starts.
</p>	

<h3>SessionEngine</h3>
<p>
SessionEngine is an AloeExpress.SessionEngine instance, which is optionally created if the server is started with the SessionsEnabled set to True.
</p>	

<h3>SessionsSweepIntervalSecs</h3>
<p>
If the server's sessions are enabled (see "SessionsEnabled" above), then this value is used to determine the frequency with which expired sessions are removed. This is an Integer with a default value of 300
</p>	

<h3>SilentStart</h3>
<p>
Can be used to suppress the display of the server info when the server launches.
Defaults to False.
</p>	

<h3>WebSockets</h3>
<p>
An array of AloeExpress.Request instances, 
which supports bulk WebSocket-related functions such as message broadcasting.
</p>	

<h3>WSTimeout</h3>
<p>
Can be used to specify the number of seconds of inactivity that can pass before a WebSocket will
be considered to have timed out. The default is 1800 seconds (30 minutes).
To disable WebSocket timeouts, set WSTimeout to zero.
</p>	    </div>
</div>


<div id='stacks_out_285_page9' class='stacks_out'>
    <div id='stacks_in_285_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
<style scoped>
.stacks_in_334_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_334_page9.ts-box a{color: #00A8FF;}
.stacks_in_334_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_334_page9.ts-box.transparent{background: none;}
.stacks_in_334_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_334_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_334_page9 transparent">
<div id='stacks_out_337_page9' class='stacks_out'>
    <div id='stacks_in_337_page9' class='stacks_in html_stack'>
		<h1>ServerThread</h1>
		<p>
		Aloe Express-based apps can be designed to listen on multiple ports,
		in which case the app is actually running multiple instances of
		the Server class, each in its own thread. 
		The Aloe Express "ServerThread" helps to make this possible.
		</p>
		<p>
		The ServerThread class is a subclass of Xojo's 
		<a href="http://docs.xojo.com/index.php/Thread" target="_docs">Thread</a> class. 
		As a result, the Thread class's properties and methods are available.
		</p>
		
		<h2>Example</h2>
		<p>
		In this example, the app is being configured to use three Server instances,
		each listening on its own port, and each assigned to its own thread.
		</p>
<pre class="code">Dim ServerThread1 As New AloeExpress.ServerThread
ServerThread1.Server.Port = 64000
ServerThread1.Run

Dim ServerThread2 As New AloeExpress.ServerThread
ServerThread2.Server.Port = 64001
ServerThread2.Run

Dim ServerThread3 As New AloeExpress.ServerThread
ServerThread3.Server.Port = 64002
ServerThread3.Run

While True
  app.DoEvents
Wend
</pre>		

		<h2>Methods</h2>
		
		<p>
		Refer to the Xojo
		<a href="http://docs.xojo.com/index.php/Thread" target="_docs">Thread class</a>
		for methods.
		</p>
			
		
		<h2>Properties</h2>
		
		<h3>Server</h3>
		<p>
		This is an instance of the 
		<a href="/classes/server.html">Aloe Express Server class</a>
		that has been created to run in the thread.
		</p>
		
		<p>
		Refer to the Xojo
		<a href="http://docs.xojo.com/index.php/Thread" target="_docs">Thread class</a>
		for additional properties.
		</p>		    </div>
</div>


<div id='stacks_out_336_page9' class='stacks_out'>
    <div id='stacks_in_336_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
<style scoped>
.stacks_in_339_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_339_page9.ts-box a{color: #00A8FF;}
.stacks_in_339_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_339_page9.ts-box.transparent{background: none;}
.stacks_in_339_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_339_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_339_page9 transparent">
<div id='stacks_out_341_page9' class='stacks_out'>
    <div id='stacks_in_341_page9' class='stacks_in html_stack'>
<h1>SessionEngine</h1>
<p>
SessionEngine, a subclass of the Xojo Timer class, is used to manage session in Aloe Express-based Web apps and sites.
It handles the creation and maintenance of sessions.
</p>

<h2>Methods</h2>

<h3>SessionGet</h3>
<p>
Given a Request instance, SessionGet returns a session to the caller. 
The session is implemented as a Dictionary, 
which gives you the ability to store a wide range of values and objects in the session.
If the specified Request instance does not already have a session associated with it,
SessionGet will create one.
</p>
<p>
Additionally, SessionGet takes a second optional parameter, AssignNewID, 
as a Boolean value (with a default value of True). 
When AssignNewID is True, SessionGet will assign a new SessionID value for the
session, which helps prevent 
<a href="https://en.wikipedia.org/wiki/Session_fixation" target="_wiki">
session fixation attacks</a>.
</p>
<p>
Example:
</p>
<pre class="code">Dim Session As Dictionary = App.SessionEngine.SessionGet(Request)

If Session.Value("Authenticated") = False Then
Request.Response.MetaRedirect("/login")
Return
End If</pre>
<p>
The session dictionary that is returned includes the following entries:
<ul>
	<li>SessionID: The ID assigned to the session by SessionEngine.</li>
	<li>LastRequestTimestamp: A timestamp (Date) representing the last time that the session was accessed.</li>
	<li>RemoteAddress: The IP address associated with the session.</li>
	<li>UserAgent: The user agent (browser type) associated with the session.</li>
	<li>RequestCount: The number of times that the session has been referred to.</li>
	<li>Authenticated: A boolean value indicating if the session has been authenticated or not.</li>
</ul>
</p>

<h3>SessionsSweep</h3>
<p>
This method, which is called on a timer, removes any expired sessions.
The frequency of the timer is based on SessionEngine's SweepIntervalSecs property.
You do not need to call this method directly. 
</p>

<h3>SessionTerminate</h3>
<p>
In some cases, you might want to terminate a sessions prior to it expiring. 
For example, when an authenticated user logs out of an application.
In those cases, call SessionTerminate.
</p>
<p>
For example:
</p>				
<pre class="code">Dim Session As Dictionary = App.SessionEngine.SessionGet(Request)
App.SessionEngine.SessionTerminate(Session)</pre>



<h2>Properties</h2>

<h3>Sessions</h3>
<p>
SessionEngine maintains sessions via the Sessions property, which is a
Dictionary. The keys used for the Sessions dictionary are SessionIDs,
which the engine automatically generates as needed. 
</p>

<h3>SessionsTimeOutSecs</h3>
<p>
SessionEngine automatically handles session timeouts. This is the situation where
a session hasn't been active for awhile, and it is assumed that the session is no longer active.
The SessionsTimeOutSecs property, which is an Integer value with a default value of 600,
is used to specify the number of seconds that can elapse between requests, after which a
session will be terminated.
</p>

<h3>SweepIntervalSecs</h3>
<p>
This property, an Integer value with a default value of 300,
is used to specify the number of seconds
between runs of the SessionsSweep method. 
</p>

<h2>Examples</h2>

<h3>Starting SessionEngine</h3>
<p>
This is usually called via the app's Run event handler, where SessionEngine
itself is a property of the app.
</p>
<pre class="code">SessionEngine = New AloeExpress.SessionEngine</pre>

<h3>Creating and Accessing a Session</h3>
<pre class="code">// Get a session.
Session = App.SessionEngine.SessionGet(Request)

// If the user has not been authenticated...
If Session.Value("Authenticated") = False Then
Request.Response.MetaRedirect("/login")
Return
End If
</pre>	    </div>
</div>


<div id='stacks_out_343_page9' class='stacks_out'>
    <div id='stacks_in_343_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
<style scoped>
.stacks_in_344_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_344_page9.ts-box a{color: #00A8FF;}
.stacks_in_344_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_344_page9.ts-box.transparent{background: none;}
.stacks_in_344_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_344_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_344_page9 transparent">
<div id='stacks_out_346_page9' class='stacks_out'>
    <div id='stacks_in_346_page9' class='stacks_in html_stack'>
<h1>Template</h1>
<p style="background-color: yellow; padding: 12px;">
As of v3.0, the Template class has been moved to a Templates modules. 
The class is now named MustacheLite.
</p>

<p>
The Template class can be used to merge data with 
<a href="http://mustache.github.io">mustache-like</a> logic-less templates to render
documents.
</p>    </div>
</div>




<div id='stacks_out_348_page9' class='stacks_out'>
    <div id='stacks_in_348_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
<style scoped>
.stacks_in_361_page9.ts-box{background: #FFFFFF;color: #222222;}
.stacks_in_361_page9.ts-box a{color: #00A8FF;}
.stacks_in_361_page9.ts-box a:hover{color: #00CCFF;}
.stacks_in_361_page9.ts-box.transparent{background: none;}
.stacks_in_361_page9.ts-box .count:before{background: #FFFFFF;}
.stacks_in_361_page9.ts-box.transparent .count:before{background: #fff;}
</style>

<div class="ts-box stacks_in_361_page9 transparent">
<div id='stacks_out_362_page9' class='stacks_out'>
    <div id='stacks_in_362_page9' class='stacks_in html_stack'>
<h1>XSProcessor</h1>
<p>
XSProcessor is an internal Aloe Express class that is used by the Request class to process XojoScript blocks found within static content. The class is used by Request.MapToFile to parse XojoScript code blocks within files (if the Request.XojoScriptEnabled property is set to True). However, the class can also be used process ad-hoc XojoScript code, or code blocks that are generated or obtained outside of the MapToFile method.
</p>    </div>
</div>


<div id='stacks_out_364_page9' class='stacks_out'>
    <div id='stacks_in_364_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class=""/>

    </div>
</div>

</div>
    </div>
  </div>
</div>    </div>
</div>


<div id='stacks_out_48_page9' class='stacks_out'>
    <div id='stacks_in_48_page9' class='stacks_in '>

<div id='stacks_out_p48_n1_page9' class='stacks_out'>
    <div id='stacks_in_p48_n1_page9' class='stacks_in com_joeworkman_stacks_foundation_1col_s3_stack'>


<div class='row        '  > <div class='columns small-12      '> 
<div id='stacks_out_p48_n2_page9' class='stacks_out'>
    <div id='stacks_in_p48_n2_page9' class='stacks_in com_joeworkman_stacks_foundation_3col_s3_stack'>


<div class='row     '  > <div class='columns small-12    medium-4     ' >  
<div id='stacks_out_p48_n3_page9' class='stacks_out'>
    <div id='stacks_in_p48_n3_page9' class='stacks_in com_joeworkman_stacks_foundation_header_stack'>
<h4 class="text-center  alt   " >Getting Started</h4>

    </div>
</div>


<div id='stacks_out_p48_n5_page9' class='stacks_out'>
    <div id='stacks_in_p48_n5_page9' class='stacks_in com_joeworkman_stacks_foundation_paragraph_s3_stack'>
 <p class="text-center alt   " draggable="false" >
    <a href="../../resources/downloads.html" title="Download">Aloe Express Downloads</a><br /><a href="../../tutorials/getting-started/" title="Getting Started">Getting Started Tutorial</a><br /><a href="../../tutorials/hello-world/" title="Hello World">Hello, World!</a>

</p> 

    </div>
</div>

  </div> <div class='columns small-12    medium-4     ' >  
<div id='stacks_out_p48_n8_page9' class='stacks_out'>
    <div id='stacks_in_p48_n8_page9' class='stacks_in com_joeworkman_stacks_foundation_header_stack'>
<h4 class="text-center  alt   " >Resources</h4>

    </div>
</div>


<div id='stacks_out_p48_n10_page9' class='stacks_out'>
    <div id='stacks_in_p48_n10_page9' class='stacks_in com_joeworkman_stacks_foundation_paragraph_s3_stack'>
 <p class="text-center alt   " draggable="false" >
    <a href="classes.html" title="Online Courses">Classes</a> & <a href="../../resources/docs/methods.html" title="Premium Services">Methods</a><br /><a href="../../resources/tech-notes/" title="Technical Notes">Tech Notes</a><br /><a href="../../resources/additional.html" title="Additional Resources">Additional Resources</a><br /><a href="../../resources/colophon.html" title="Colophon">Colophon</a>

</p> 

    </div>
</div>

  </div> <div class='columns small-12    medium-4     ' >  
<div id='stacks_out_p48_n13_page9' class='stacks_out'>
    <div id='stacks_in_p48_n13_page9' class='stacks_in com_joeworkman_stacks_foundation_header_stack'>
<h4 class="text-center  alt   " >Support & Community</h4>

    </div>
</div>


<div id='stacks_out_p48_n15_page9' class='stacks_out'>
    <div id='stacks_in_p48_n15_page9' class='stacks_in com_joeworkman_stacks_foundation_paragraph_s3_stack'>
 <p class="text-center alt   " draggable="false" >
    <a href="../../support/faq.html" title="FAQ">FAQ</a><br /><a href="../../support/options.html" title="Support Options">Support Options</a><br /><a href="../../about/thanks.html" title="Thanks">Special Thanks</a>

</p> 

    </div>
</div>

  </div> </div>

    </div>
</div>


<div id='stacks_out_p48_n18_page9' class='stacks_out'>
    <div id='stacks_in_p48_n18_page9' class='stacks_in com_joeworkman_stacks_foundation_divider_s3_stack'>
<hr class="custom"/>

    </div>
</div>


<div id='stacks_out_p48_n19_page9' class='stacks_out'>
    <div id='stacks_in_p48_n19_page9' class='stacks_in com_joeworkman_stacks_foundation_paragraph_s3_stack'>
 <p class="text-center alt   " draggable="false" >
    &copy; Copyright {{system.date.year}} <a href="http://timdietrich.me/" title="Learn about Tim Dietrich." rel="external">Tim Dietrich</a>. Made with <a href="https://www.xojo.com" rel="external">Xojo</a> {{system.meta.xojo-version}} &amp; Aloe Express {{system.meta.aloe-version}}.

</p> 

    </div>
</div>

 </div> </div>

    </div>
</div>

    </div>
</div>

    </div>
</div>








<script data-cfasync="true" src="../../rw_common/themes/foundation/foundation.min.js?rwcache=596126273&rwcache=596126273"></script>


</body>
</html>
